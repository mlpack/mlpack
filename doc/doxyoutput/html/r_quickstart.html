<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mlpack: mlpack in R quickstart guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra-stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mlpack
   &#160;<span id="projectnumber">3.4.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">mlpack in R quickstart guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="r_quickstart_intro"></a>
Introduction</h1>
<p>This page describes how you can quickly get started using mlpack from R and gives a few examples of usage, and pointers to deeper documentation.</p>
<p>This quickstart guide is also available for <a class="el" href="python_quickstart.html">Python</a>, <a class="el" href="cli_quickstart.html">the command-line</a>, <a class="el" href="julia_quickstart.html">Julia</a> and <a class="el" href="go_quickstart.html">Go</a>.</p>
<h1><a class="anchor" id="r_quickstart_install"></a>
Installing mlpack binary package</h1>
<p>Installing the mlpack bindings for R is straightforward; you can just use CRAN:</p>
<div class="fragment"><div class="line">install.packages(&#39;mlpack&#39;)</div>
</div><!-- fragment --><h1><a class="anchor" id="r_quickstart_source_install"></a>
Installing mlpack package from source</h1>
<p>Building the R bindings from scratch is a little more in-depth, though. For information on that, follow the instructions on the <a class="el" href="build.html">Building mlpack From Source</a> page, and be sure to specify <code>-DBUILD_R_BINDINGS=ON</code> to CMake; you may need to also set the location of the R program with <code>-DR_EXECUTABLE=/path/to/R</code>.</p>
<h1><a class="anchor" id="r_quickstart_example"></a>
Simple mlpack quickstart example</h1>
<p>As a really simple example of how to use mlpack from R, let's do some simple classification on a subset of the standard machine learning <code>covertype</code> dataset. We'll first split the dataset into a training set and a testing set, then we'll train an mlpack random forest on the training data, and finally we'll print the accuracy of the random forest on the test dataset.</p>
<p>You can copy-paste this code directly into R to run it.</p>
<div class="fragment"><div class="line">if(!requireNamespace(&quot;data.table&quot;, quietly = TRUE)) { install.packages(&quot;data.table&quot;) }</div>
<div class="line">suppressMessages({</div>
<div class="line">    library(&quot;mlpack&quot;)</div>
<div class="line">    library(&quot;data.table&quot;)</div>
<div class="line">})</div>
<div class="line"> </div>
<div class="line"># Load the dataset from an online URL.  Replace with &#39;covertype.csv.gz&#39; if you</div>
<div class="line"># want to use on the full dataset.</div>
<div class="line">df &lt;- fread(&quot;https://www.mlpack.org/datasets/covertype-small.csv.gz&quot;)</div>
<div class="line"> </div>
<div class="line"># Split the labels.</div>
<div class="line">labels &lt;- df[, .(label)]</div>
<div class="line">dataset &lt;- df[, label:=NULL]</div>
<div class="line"> </div>
<div class="line"># Split the dataset using mlpack.</div>
<div class="line">prepdata &lt;- preprocess_split(input = dataset,</div>
<div class="line">                             input_labels = labels,</div>
<div class="line">                             test_ratio = 0.3,</div>
<div class="line">                             verbose = TRUE)</div>
<div class="line"> </div>
<div class="line"># Train a random forest.</div>
<div class="line">output &lt;- random_forest(training = prepdata$training,</div>
<div class="line">                        labels = prepdata$training_labels,</div>
<div class="line">                        print_training_accuracy = TRUE,</div>
<div class="line">                        num_trees = 10,</div>
<div class="line">                        minimum_leaf_size = 3,</div>
<div class="line">                        verbose = TRUE)</div>
<div class="line">rf_model &lt;- output$output_model</div>
<div class="line"> </div>
<div class="line"># Predict the labels of the test points.</div>
<div class="line">output &lt;- random_forest(input_model = rf_model,</div>
<div class="line">                        test = prepdata$test,</div>
<div class="line">                        verbose = TRUE)</div>
<div class="line"> </div>
<div class="line"># Now print the accuracy.  The third return value (&#39;probabilities&#39;), which we</div>
<div class="line"># ignored here, could also be used to generate an ROC curve.</div>
<div class="line">correct &lt;- sum(output$predictions == prepdata$test_labels)</div>
<div class="line">cat(correct, &quot;out of&quot;, length(prepdata$test_labels), &quot;test points correct&quot;,</div>
<div class="line">    correct / length(prepdata$test_labels) * 100.0, &quot;%\n&quot;)</div>
</div><!-- fragment --><p>We can see that we achieve reasonably good accuracy on the test dataset (80%+); if we use the full <code>covertype.csv.gz</code>, the accuracy should increase significantly (but training will take longer).</p>
<p>It's easy to modify the code above to do more complex things, or to use different mlpack learners, or to interface with other machine learning toolkits.</p>
<h1><a class="anchor" id="r_quickstart_whatelse"></a>
What else does mlpack implement?</h1>
<p>The example above has only shown a little bit of the functionality of mlpack. Lots of other commands are available with different functionality. A full list of each of these commands and full documentation can be found on the following page:</p>
<ul>
<li><a href="https://www.mlpack.org/doc/mlpack-git/r_documentation.html">r documentation</a></li>
</ul>
<p>For more information on what mlpack does, see <a href="https://www.mlpack.org/">https://www.mlpack.org/</a>. Next, let's go through another example for providing movie recommendations with mlpack.</p>
<h1><a class="anchor" id="r_quickstart_movierecs"></a>
Using mlpack for movie recommendations</h1>
<p>In this example, we'll train a collaborative filtering model using mlpack's <code><a href="https://www.mlpack.org/doc/mlpack-git/r_documentation.html#cf">cf()</a></code> method. We'll train this on the MovieLens dataset from <a href="https://grouplens.org/datasets/movielens/">https://grouplens.org/datasets/movielens/</a>, and then we'll use the model that we train to give recommendations.</p>
<p>You can copy-paste this code directly into R to run it.</p>
<div class="fragment"><div class="line">if(!requireNamespace(&quot;data.table&quot;, quietly = TRUE)) { install.packages(&quot;data.table&quot;) }</div>
<div class="line">suppressMessages({</div>
<div class="line">    library(&quot;mlpack&quot;)</div>
<div class="line">    library(&quot;data.table&quot;)</div>
<div class="line">})</div>
<div class="line"> </div>
<div class="line"># First, load the MovieLens dataset.  This is taken from files.grouplens.org/</div>
<div class="line"># but reposted on mlpack.org as unpacked and slightly preprocessed data.</div>
<div class="line">ratings &lt;- fread(&quot;http://www.mlpack.org/datasets/ml-20m/ratings-only.csv.gz&quot;)</div>
<div class="line">movies &lt;- fread(&quot;http://www.mlpack.org/datasets/ml-20m/movies.csv.gz&quot;)</div>
<div class="line"> </div>
<div class="line"># Hold out 10% of the dataset into a test set so we can evaluate performance.</div>
<div class="line">predata &lt;- preprocess_split(input = ratings,</div>
<div class="line">                            test_ratio = 0.1,</div>
<div class="line">                            verbose = TRUE)</div>
<div class="line"> </div>
<div class="line"># Train the model.  Change the rank to increase/decrease the complexity of the</div>
<div class="line"># model.</div>
<div class="line">output &lt;- cf(training = predata$training,</div>
<div class="line">             test = predata$test,</div>
<div class="line">             rank = 10,</div>
<div class="line">             verbose = TRUE,</div>
<div class="line">             max_iteration=2,</div>
<div class="line">             algorithm = &quot;RegSVD&quot;)</div>
<div class="line">cf_model &lt;- output$output_model</div>
<div class="line"> </div>
<div class="line"># Now query the 5 top movies for user 1.</div>
<div class="line">output &lt;- cf(input_model = cf_model,</div>
<div class="line">             query = matrix(1),</div>
<div class="line">             recommendations = 10,</div>
<div class="line">             verbose = TRUE)</div>
<div class="line"> </div>
<div class="line"># Get the names of the movies for user 1.</div>
<div class="line">cat(&quot;Recommendations for user 1:\n&quot;)</div>
<div class="line">for (i in 1:10) {</div>
<div class="line">  cat(&quot;  &quot;, i, &quot;:&quot;, as.character(movies[output$output[i], 3]), &quot;\n&quot;)</div>
<div class="line">}</div>
</div><!-- fragment --><p>Here is some example output, showing that user 1 seems to have good taste in movies:</p>
<div class="fragment"><div class="line">Recommendations for user 1:</div>
<div class="line">  0: Casablanca (1942)</div>
<div class="line">  1: Pan&#39;s Labyrinth (Laberinto del fauno, El) (2006)</div>
<div class="line">  2: Godfather, The (1972)</div>
<div class="line">  3: Answer This! (2010)</div>
<div class="line">  4: Life Is Beautiful (La Vita Ã¨ bella) (1997)</div>
<div class="line">  5: Adventures of Tintin, The (2011)</div>
<div class="line">  6: Dark Knight, The (2008)</div>
<div class="line">  7: Out for Justice (1991)</div>
<div class="line">  8: Dr. Strangelove or: How I Learned to Stop Worrying and Love the Bomb (1964)</div>
<div class="line">  9: Schindler&#39;s List (1993)</div>
</div><!-- fragment --><h1><a class="anchor" id="r_quickstart_nextsteps"></a>
Next steps with mlpack</h1>
<p>After working through this overview to <code>mlpack</code>'s R package, we hope you are inspired to use <code>mlpack</code>' in your data science workflow. We recommend as part of your next steps to look at more documentation for the R mlpack bindings:</p>
<ul>
<li><a href="https://www.mlpack.org/doc/mlpack-git/r_documentation.html">R mlpack binding documentation</a></li>
</ul>
<p>Also, mlpack is much more flexible from C++ and allows much greater functionality. So, more complicated tasks are possible if you are willing to write C++ (or perhaps Rcpp). To get started learning about mlpack in C++, the following resources might be helpful:</p>
<ul>
<li><a href="https://www.mlpack.org/doc/mlpack-git/doxygen/tutorials.html">mlpack C++ tutorials</a></li>
<li><a href="https://www.mlpack.org/doc/mlpack-git/doxygen/build.html">mlpack build and installation guide</a></li>
<li><a href="https://www.mlpack.org/doc/mlpack-git/doxygen/sample.html">Simple sample C++ mlpack programs</a></li>
<li><a href="https://www.mlpack.org/doc/mlpack-git/doxygen/index.html">mlpack Doxygen documentation homepage</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.9.1
</small></address>
</body>
<script type="text/javascript">
var x = document.querySelectorAll("img.formulaDsp");
var i;
for (i = 0; i < x.length; i++)
{
  x[i].width = x[i].offsetWidth / 4;
}
</script>
</html>
