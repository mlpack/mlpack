<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mlpack: mlpack in Go quickstart guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra-stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mlpack
   &#160;<span id="projectnumber">3.4.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">mlpack in Go quickstart guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="go_quickstart_intro"></a>
Introduction</h1>
<p>This page describes how you can quickly get started using mlpack from Go and gives a few examples of usage, and pointers to deeper documentation.</p>
<p>This quickstart guide is also available for <a class="el" href="python_quickstart.html">Python</a>, <a class="el" href="cli_quickstart.html">the command-line</a>, <a class="el" href="julia_quickstart.html">Julia</a> and <a class="el" href="r_quickstart.html">R</a>.</p>
<h1><a class="anchor" id="go_quickstart_install"></a>
Installing mlpack</h1>
<p>Installing the mlpack bindings for Go is somewhat time-consuming as the library must be built; you can run the following code:</p>
<div class="fragment"><div class="line">go get -u -d mlpack.org/v1/mlpack</div>
<div class="line">cd ${GOPATH}/src/mlpack.org/v1/mlpack</div>
<div class="line">make install</div>
</div><!-- fragment --><p>Building the Go bindings from scratch is a little more in-depth, though. For information on that, follow the instructions on the <a class="el" href="build.html">Building mlpack From Source</a> page, and be sure to specify <code>-DBUILD_GO_BINDINGS=ON</code> to CMake;</p>
<h1><a class="anchor" id="go_quickstart_example"></a>
Simple mlpack quickstart example</h1>
<p>As a really simple example of how to use mlpack from Go, let's do some simple classification on a subset of the standard machine learning <code>covertype</code> dataset. We'll first split the dataset into a training set and a testing set, then we'll train an mlpack random forest on the training data, and finally we'll print the accuracy of the random forest on the test dataset.</p>
<p>You can copy-paste this code directly into main.go to run it. </p><div class="fragment"><div class="line">package main</div>
<div class="line"> </div>
<div class="line">import (</div>
<div class="line">  &quot;mlpack.org/v1/mlpack&quot;</div>
<div class="line">  &quot;fmt&quot;</div>
<div class="line">)</div>
<div class="line">func main() {</div>
<div class="line"> </div>
<div class="line">  // Download dataset.</div>
<div class="line">  mlpack.DownloadFile(&quot;https://www.mlpack.org/datasets/covertype-small.data.csv.gz&quot;,</div>
<div class="line">                      &quot;data.csv.gz&quot;)</div>
<div class="line">  mlpack.DownloadFile(&quot;https://www.mlpack.org/datasets/covertype-small.labels.csv.gz&quot;,</div>
<div class="line">                      &quot;labels.csv.gz&quot;)</div>
<div class="line"> </div>
<div class="line">  // Extract/Unzip the dataset.</div>
<div class="line">  mlpack.UnZip(&quot;data.csv.gz&quot;, &quot;data.csv&quot;)</div>
<div class="line">  dataset, _ := mlpack.Load(&quot;data.csv&quot;)</div>
<div class="line"> </div>
<div class="line">  mlpack.UnZip(&quot;labels.csv.gz&quot;, &quot;labels.csv&quot;)</div>
<div class="line">  labels, _ := mlpack.Load(&quot;labels.csv&quot;)</div>
<div class="line"> </div>
<div class="line">  // Split the dataset using mlpack.</div>
<div class="line">  params := mlpack.PreprocessSplitOptions()</div>
<div class="line">  params.InputLabels = labels</div>
<div class="line">  params.TestRatio = 0.3</div>
<div class="line">  params.Verbose = true</div>
<div class="line">  test, test_labels, train, train_labels :=</div>
<div class="line">      mlpack.PreprocessSplit(dataset, params)</div>
<div class="line"> </div>
<div class="line">  // Train a random forest.</div>
<div class="line">  rf_params := mlpack.RandomForestOptions()</div>
<div class="line">  rf_params.NumTrees = 10</div>
<div class="line">  rf_params.MinimumLeafSize = 3</div>
<div class="line">  rf_params.PrintTrainingAccuracy = true</div>
<div class="line">  rf_params.Training = train</div>
<div class="line">  rf_params.Labels = train_labels</div>
<div class="line">  rf_params.Verbose = true</div>
<div class="line">  rf_model, _, _ := mlpack.RandomForest(rf_params)</div>
<div class="line"> </div>
<div class="line">  // Predict the labels of the test points.</div>
<div class="line">  rf_params_2 := mlpack.RandomForestOptions()</div>
<div class="line">  rf_params_2.Test = test</div>
<div class="line">  rf_params_2.InputModel = &amp;rf_model</div>
<div class="line">  rf_params_2.Verbose = true</div>
<div class="line">  _, predictions, _ := mlpack.RandomForest(rf_params_2)</div>
<div class="line"> </div>
<div class="line">  // Now print the accuracy.</div>
<div class="line">  rows, _ := predictions.Dims()</div>
<div class="line">  var sum int = 0</div>
<div class="line">  for i := 0; i &lt; rows; i++ {</div>
<div class="line">    if (predictions.At(i, 0) == test_labels.At(i, 0)) {</div>
<div class="line">      sum = sum + 1</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  fmt.Print(sum, &quot; correct out of &quot;, rows, &quot; (&quot;,</div>
<div class="line">      (float64(sum) / float64(rows)) * 100, &quot;%).\n&quot;)</div>
<div class="line">}</div>
</div><!-- fragment --><p>We can see that we achieve reasonably good accuracy on the test dataset (80%+); if we use the full <code>covertype.csv.gz</code>, the accuracy should increase significantly (but training will take longer).</p>
<p>It's easy to modify the code above to do more complex things, or to use different mlpack learners, or to interface with other machine learning toolkits.</p>
<h1><a class="anchor" id="go_quickstart_whatelse"></a>
What else does mlpack implement?</h1>
<p>The example above has only shown a little bit of the functionality of mlpack. Lots of other commands are available with different functionality. A full list of each of these commands and full documentation can be found on the following page:</p>
<ul>
<li><a href="https://www.mlpack.org/doc/mlpack-git/go_documentation.html">Go documentation</a></li>
</ul>
<p>You can also use the GoDoc to explore the <code>mlpack</code> module and its functions; every function comes with comprehensive documentation.</p>
<p>For more information on what mlpack does, see <a href="https://www.mlpack.org/">https://www.mlpack.org/</a>. Next, let's go through another example for providing movie recommendations with mlpack.</p>
<h1><a class="anchor" id="go_quickstart_movierecs"></a>
Using mlpack for movie recommendations</h1>
<p>In this example, we'll train a collaborative filtering model using mlpack's <code><a href="https://www.mlpack.org/doc/mlpack-git/go_documentation.html#cf">Cf()</a></code> method. We'll train this on the MovieLens dataset from <a href="https://grouplens.org/datasets/movielens/">https://grouplens.org/datasets/movielens/</a>, and then we'll use the model that we train to give recommendations.</p>
<p>You can copy-paste this code directly into main.go to run it.</p>
<div class="fragment"><div class="line">package main</div>
<div class="line"> </div>
<div class="line">import (</div>
<div class="line">  &quot;github.com/frictionlessdata/tableschema-go/csv&quot;</div>
<div class="line">  &quot;mlpack.org/v1/mlpack&quot;</div>
<div class="line">  &quot;gonum.org/v1/gonum/mat&quot;</div>
<div class="line">  &quot;fmt&quot;</div>
<div class="line">)</div>
<div class="line">func main() {</div>
<div class="line"> </div>
<div class="line">  // Download dataset.</div>
<div class="line">  mlpack.DownloadFile(&quot;https://www.mlpack.org/datasets/ml-20m/ratings-only.csv.gz&quot;,</div>
<div class="line">                      &quot;ratings-only.csv.gz&quot;)</div>
<div class="line">  mlpack.DownloadFile(&quot;https://www.mlpack.org/datasets/ml-20m/movies.csv.gz&quot;,</div>
<div class="line">                      &quot;movies.csv.gz&quot;)</div>
<div class="line"> </div>
<div class="line">  // Extract dataset.</div>
<div class="line">  mlpack.UnZip(&quot;ratings-only.csv.gz&quot;, &quot;ratings-only.csv&quot;)</div>
<div class="line">  ratings, _ := mlpack.Load(&quot;ratings-only.csv&quot;)</div>
<div class="line"> </div>
<div class="line">  mlpack.UnZip(&quot;movies.csv.gz&quot;, &quot;movies.csv&quot;)</div>
<div class="line">  table, _ := csv.NewTable(csv.FromFile(&quot;movies.csv&quot;), csv.LoadHeaders())</div>
<div class="line">  movies, _ := table.ReadColumn(&quot;title&quot;)</div>
<div class="line"> </div>
<div class="line">  // Split the dataset using mlpack.</div>
<div class="line">  params := mlpack.PreprocessSplitOptions()</div>
<div class="line">  params.TestRatio = 0.1</div>
<div class="line">  params.Verbose = true</div>
<div class="line">  ratings_test, _, ratings_train, _ := mlpack.PreprocessSplit(ratings, params)</div>
<div class="line"> </div>
<div class="line">  // Train the model.  Change the rank to increase/decrease the complexity of the</div>
<div class="line">  // model.</div>
<div class="line">  cf_params := mlpack.CfOptions()</div>
<div class="line">  cf_params.Training = ratings_train</div>
<div class="line">  cf_params.Test = ratings_test</div>
<div class="line">  cf_params.Rank = 10</div>
<div class="line">  cf_params.Verbose = true</div>
<div class="line">  cf_params.Algorithm = &quot;RegSVD&quot;</div>
<div class="line">  _, cf_model := mlpack.Cf(cf_params)</div>
<div class="line"> </div>
<div class="line">  // Now query the 5 top movies for user 1.</div>
<div class="line">  cf_params_2 := mlpack.CfOptions()</div>
<div class="line">  cf_params_2.InputModel = &amp;cf_model</div>
<div class="line">  cf_params_2.Recommendations = 10</div>
<div class="line">  cf_params_2.Query = mat.NewDense(1, 1, []float64{1})</div>
<div class="line">  cf_params_2.Verbose = true</div>
<div class="line">  cf_params_2.MaxIterations = 10</div>
<div class="line">  output, _ := mlpack.Cf(cf_params_2)</div>
<div class="line"> </div>
<div class="line">  // Get the names of the movies for user 1.</div>
<div class="line">  fmt.Println(&quot;Recommendations for user 1&quot;)</div>
<div class="line">  for i := 0; i &lt; 10; i++ {</div>
<div class="line">    fmt.Println(i, &quot;:&quot;, movies[int(output.At(0 , i))])</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Here is some example output, showing that user 1 seems to have good taste in movies:</p>
<div class="fragment"><div class="line">Recommendations for user 1:</div>
<div class="line">  0: Casablanca (1942)</div>
<div class="line">  1: Pan&#39;s Labyrinth (Laberinto del fauno, El) (2006)</div>
<div class="line">  2: Godfather, The (1972)</div>
<div class="line">  3: Answer This! (2010)</div>
<div class="line">  4: Life Is Beautiful (La Vita Ã¨ bella) (1997)</div>
<div class="line">  5: Adventures of Tintin, The (2011)</div>
<div class="line">  6: Dark Knight, The (2008)</div>
<div class="line">  7: Out for Justice (1991)</div>
<div class="line">  8: Dr. Strangelove or: How I Learned to Stop Worrying and Love the Bomb (1964)</div>
<div class="line">  9: Schindler&#39;s List (1993)</div>
</div><!-- fragment --><h1><a class="anchor" id="go_quickstart_nextsteps"></a>
Next steps with mlpack</h1>
<p>Now that you have done some simple work with mlpack, you have seen how it can easily plug into a data science workflow in Go. A great thing to do next would be to look at more documentation for the Go mlpack bindings:</p>
<ul>
<li><a href="https://www.mlpack.org/doc/mlpack-git/go_documentation.html">Go mlpack binding documentation</a></li>
</ul>
<p>Also, mlpack is much more flexible from C++ and allows much greater functionality. So, more complicated tasks are possible if you are willing to write C++. To get started learning about mlpack in C++, the following resources might be helpful:</p>
<ul>
<li><a href="https://www.mlpack.org/doc/mlpack-git/doxygen/tutorials.html">mlpack C++ tutorials</a></li>
<li><a href="https://www.mlpack.org/doc/mlpack-git/doxygen/build.html">mlpack build and installation guide</a></li>
<li><a href="https://www.mlpack.org/doc/mlpack-git/doxygen/sample.html">Simple sample C++ mlpack programs</a></li>
<li><a href="https://www.mlpack.org/doc/mlpack-git/doxygen/index.html">mlpack Doxygen documentation homepage</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.9.1
</small></address>
</body>
<script type="text/javascript">
var x = document.querySelectorAll("img.formulaDsp");
var i;
for (i = 0; i < x.length; i++)
{
  x[i].width = x[i].offsetWidth / 4;
}
</script>
</html>
